!function(){"use strict";var e=angular.module("rawUI",[]),t=angular.element;e.directive("a",function(){return{restrict:"E",link:function(e,t,n){t.on("click",function(e){return t.hasClass("disabled")?(e.stopImmediatePropagation(),!1):void("#"===n.href&&e.preventDefault())})}}}),e.directive("transitionHeight",["$parse","ruiUtils",function(e,n){return{restrict:"A",scope:!1,link:function(r,i,a){var f,o=(i[0],a.transitionHeight?e(a.transitionHeight):null),p=(n.getStyle,!1),d=function(e){if(!f){if(f=!0,e){i.css("height","auto");var t=n.rect(i).height;i.css("height",0),setTimeout(function(){i.addClass("open").css("height","auto"!==t?t+"px":"auto")},1)}else t=n.rect(i).height||"auto",i.removeClass("open").css("height",0);var a=n.rect(i).height,s=setInterval(function(){if("auto"===t||a===n.rect(i).height){f=!1,clearInterval(s);var u=o(r);e!==u&&d(u)}a=n.rect(i).height},50)}};t(window).on("resize",function(){p&&i.css("height","auto")}),o&&r.$watch(function(){return o(r)},function(e){d(p=e)}),!o&&console.warn("slide-down directive requires a boolean object model")}}}]),e.directive("enable",["$parse","ruiUtils",function(e,t){return{restrict:"A",scope:!1,link:function(n,r,i){if(!i.enable)return void console.warn("enable directive requires an expression to evaluate.");var a=e(i.enable);n.$watch(function(){return a(n)},function(e){e?t.disable(r,!1):t.disable(r,!0)})}}}]),e.directive("disable",["$parse","ruiUtils",function(e,t){return{restrict:"A",scope:!1,link:function(n,r,i){if(!i.disable)return void console.warn('"disable" directive requires an attribute value to evaluate.');var a=e(i.disable);n.$watch(function(){return a(n)},function(e){e?t.disable(r,!0):t.disable(r,!1)})}}}]),e.directive("and",["$parse","$timeout","ruiUtils",function(e,t,n){return{restrict:"A",require:"ngModel",scope:!0,link:function(t,n,r,i){if(!r.and)return void console.warn('"and" directive requires expression to evaluate.');var a=e(r.and);t.$watch(function(){return a(t)},function(e){e||("radio"===n[0].type||"checkbox"===n[0].type||n[0].hasOwnProperty("checked")?(i.$setViewValue(!1),n[0].checked=!1):(i.$setViewValue(""),n[0].value=""))})}}}]),function(){document.registerElement&&document.registerElement("select-box"),e.directive("selectBox",["$parse","ruiUtils",function(e,n){var r=200;return{restrict:"EAC",require:"ngModel",scope:!1,link:function(i,a,s,o){var d,u=t(a[0].querySelector(".value")),l=t(a[0].querySelector("ul")),c=t(a[0].querySelectorAll("ul>li")),f=t(document),p=!1,h=function(){a.removeClass("open"),f.unbind("click",h),p=!1,setTimeout(function(){l.css("width",n.rect(a).width+"px")})},m=function(){a.addClass("open"),setTimeout(function(){l.css("width",n.rect(a).width+"px"),f.bind("click",h)})},v=function(e){d&&d.removeAttr("data-selected"),d=t(l[0].querySelector('li[data-value="'+e+'"]')),0!==d.length?(u.html(d.html()),a.addClass("has-value")[0].value=e,d.attr("data-selected","true")):(u.text(""),a.removeClass("has-value")[0].value=e)};return 0===l.length?void console.warn("select-box requires unordered list."):(a.prepend(t('<span class="select-button"></span>')).css("z-index",r--),0==u.length&&a.prepend(u=t('<span class="value"></span>')),a.on("click",function(){return a.hasClass("disabled")?void h():(p=!p,void(p?m():h()))}),l.on("click",function(e){e.stopImmediatePropagation()}),c.on("click",function(n){d.removeAttr("data-selected"),d=t(this).attr("data-selected",!0),u.html(d.html()),s.onSelect&&e(s.onSelect)(i);var r=a[0].value=d.attr("data-value")||d.text();o.$setViewValue(r),a.addClass("has-value")[0].value=r,a.triggerHandler("change"),h()}),v(o.$modelValue),void i.$watch(function(e){return o.$modelValue},function(e){v(e)}))}}}])}(),function(){document.registerElement&&document.registerElement("slider-box"),e.directive("sliderBox",["ruiUtils",function(e){var n=e.rect,r={size:"width",offset:"left",pointer:"pointerX"},i={size:"height",offset:"top",pointer:"pointerY"},a=function(e,t){var r=e.orientation,i=e.maxValue-e.minValue,a=t/i,s=n(e.handle)[r.size]/2;return n(e.track)[r.size]*a-s},s=function(t,r){var i=t.orientation;return e[i.pointer](r)-t.handleOffset-n(t.track)[i.offset]},o=function(e,t,r){var s=e.orientation,o=n(e.handle)[s.size]/2;t=Math.min(Math.max(t,-o),n(e.track)[s.size]-o);var u=(t+o)/n(e.track)[s.size],l=s===i?1-u:u,c=e.minValue+(e.maxValue-e.minValue)*l;if(c=Math.round(c/e.step)*e.step,c=Math.round(100*c)/100,r){var f=n(e.track)[s.size]*u-o;e.handle.css(s.offset,f+"px"),e.model.$setViewValue(c)}else e.handle.css(s.offset,a(e,c)+"px")};return{restrict:"EAC",require:"ngModel",scope:!1,link:function(u,l,c,f){var p={model:f,minValue:parseFloat(c.min)||0,maxValue:parseFloat(c.max)||100,step:parseFloat(c.step)||1,editBtn:l[0].querySelector(".slider-box-edit-button"),handle:t('<div class="slider-box-handle"></div>'),track:t('<div class="slider-box-track"></div>'),trackContainer:t('<div class="slider-box-track-container"></div>'),isDragging:!1,handleOffset:0},d=function(t){l.hasClass("disabled")||(p.isDragging=!0,p.handleOffset=e[p.orientation.pointer](t)-n(p.handle)[p.orientation.offset],l.addClass("dragging"))},h=function(e){p.isDragging&&(l.removeClass("dragging active"),setTimeout(function(){p.isDragging=!1,!l.hasClass("disabled")&&o(p,a(p,f.$modelValue))},1))},m=function(e){p.isDragging&&!l.hasClass("disabled")&&o(p,s(p,e),!0)};p.editBtn&&(p.editBtn=t(p.editBtn),p.editBtn.on("click",function(e){!l.hasClass("disabled")&&l.addClass("active")}),t(document).on("click",function(t){l.hasClass("active")&&!e.isClicked(l,t)&&l.removeClass("active")}),l.append(p.editBtn)),l.append(p.trackContainer.append(p.track.append(p.handle))),p.orientation=n(p.track).width>n(p.track).height?r:i,p.track.on("click",function(t){e.stopEvent(t),p.isDragging||l.hasClass("disabled")||(p.handleOffset=0,o(p,s(p,t),!0))}),p.handle.on("mousedown",d).on("touchstart",d),t(document).on("mouseup",h).on("touchend",h),t(document).on("mousemove",m).on("touchmove",m),u.$watch(function(){return f.$modelValue},function(e){!p.isDragging&&o(p,a(p,e))})}}}])}(),e.directive("toggle",["$timeout","$parse",function(e,t){return{restrict:"A",scope:!1,link:function(n,r,i){var a=t(i.toggle);r.on("click",function(t){t.preventDefault(),r.hasClass("disabled")||e(function(){var e=!a(n);a.assign(n,e),r[e?"addClass":"removeClass"]("active")})})}}}]),e.directive("popupBox",["popups",function(e){return{restrict:"EAC",link:function(t,n,r){n.prop("isPopupElement",!0).on("click",function(t){if(!r.id)return void console.warn("popup-box directive requires ID attribute.");for(var i=t.target;i&&i!==n[0];){if(e.isPopupElement(i))return;i=i.parentElement}e.closeChildren(r.id)})}}}]),e.directive("popupButton",["ruiUtils","popups",function(e,n){var r=e.isDefined;return{restrict:"A",link:function(e,i,a){var s=a.popupButton;return s?void i.prop("isPopupElement",!0).on("click",function(e){e.preventDefault();for(var o,a=e.target;a;){if(o=t(a),r(o.attr("data-popup-box"))||o.hasClass("disabled"))return;if(a===this)break;a=a.parentElement}for(a=i[0];a;){if(o=t(a),o.hasClass("disabled"))return;r(o.attr("data-popup-box"))&&n.keepOpen.push({id:a.id,parentId:s}),a=a.parentElement}e.stopPropagation(),n.toggle(s)}):void console.warn("popup-button directive requires attribute value to point to popup box ID attribute.")}}}]),e.factory("popups",["ruiUtils",function(e){var n,i=(e.isDefined,[]),a={},s=function(e){for(var n,t=0;n=i[t];t++)if(n.id===e)return!0;return!1},o=function(e,t){for(var n in a)n===e||!t&&s(n)||u(n,!1);i.length=0},u=function(e,n){a[e]=n;var r=t(document.getElementById(e));return r[n?"addClass":"removeClass"]("open"),n};return window.addEventListener("click",function(e){for(var t=e.target;t;){if(n.isPopup(t))return;t=t.parentElement}o(null,!0)}),n={toggle:function(e){return o(e),u(e,!a[e])},close:function(e){n.update(e,!1)},closeChildren:function(e){var t=document.getElementById(e);if(t)for(var r in a)if(a[r]&&e!==r){var i=document.getElementById(r);if(i)for(;i;){if(i===t){n.close(r);break}i=i.parentElement}}},isOpen:function(e){return a[e]},isPopup:function(e){return t(e[0]||e).prop("isPopupElement")}}}]),function(){document.registerElement&&document.registerElement("calendar-box"),e.directive("calendarBox",["$compile","$parse","ruiCalendarView","ruiUtils",function(e,n,r,i){return{restrict:"EAC",require:"^ngModel",scope:!0,link:function(n,a,s,o){var d,l=(i.isDefined(s.trackTime),i.isDefined(s.readOnly)),c=i.isDefined(s.syncView),f=i.isDefined(s.multiSelect),p=new Date,h=i.numberGetter(n,s.yearRadius,20),m=i.numberGetter(n,s.minYear,p.getFullYear()-h.val),v=i.numberGetter(n,s.maxYear,p.getFullYear()+h.val),g=i.numberGetter(n,s.year,p.getFullYear()),y=i.numberGetter(n,s.month,p.getMonth()+1);n.calendar=d=r.createView(o,{isSyncView:c,isMultiSelect:f,yearRadius:h.val,minYear:m.val,maxYear:v.val,year:g.val,month:y.val}),n.calendarData=d.data,n.yearRadius=h.val,n.minYear=m.val,n.maxYear=v.val,n.select=function(e,t){t&&t.preventDefault(),d.addSelected(r.convertOut(e),!0)},n.showSelected=function(e){e&&e.preventDefault(),d.showSelected()},n.year=String(d.year()),n.month=String(d.month());var w=t(a[0].querySelector(".calendar")||'<div class="calendar"></div>'),S=function(){return l?'<span ng-class="{hidden:!day.date}">{{day.day}}</a>':'<a href="#" ng-class="{hidden:!day.year}" ng-click="select(day, $event)">{{day.day}}</a>'}(),b=t(e(function(){var e='<div class="calendar-week" ng-repeat="row in calendarData()">';return e+='<span class="calendar-day" ng-repeat="day in row" ng-class="{selected:day.selected,disabled:day.disabled}">',e+=S,e+="</span></div>"}())(n));!function(){var e=t(a[0].querySelector(".calendar-header")),n=Math.max(1,Math.min(3,parseInt(s.dayLen)||2));e.length?e.remove():e=t('<div class="calendar-week calendar-header"></div>').append('<span class="calendar-day">'+"Sun".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Mon".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Tue".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Wed".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Thu".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Fri".substr(0,n)+"<span>").append('<span class="calendar-day">'+"Sat".substr(0,n)+"<span>"),w.append(e)}(),a.append(w.append(b)),n.$watch("year",function(e){d.year(e)}),n.$watch("month",function(e){d.month(e)}),n.$watch("calendar.year()",function(e){n.year=String(e)}),n.$watch("calendar.month()",function(e){n.month=String(e)}),n.$watchCollection(function(){return o.$modelValue},function(e){a[0].value=e,d.updateData()}),h.getter&&n.$watch(function(){return h.getter(n)},function(e){var t=new Date,r=parseInt(e);n.yearRadius=r,n.minYear=t.getFullYear()-r,n.maxYear=t.getFullYear()+r,d.yearRadius(r)}),g.getter&&n.$watch(function(){return g.getter(n)},function(e){var t=parseInt(e);n.year=t,d.year(t)}),y.getter&&n.$watch(function(){return y.getter(n)},function(e){var t=parseInt(e);n.month=t,d.month(t)}),v.getter&&n.$watch(function(){return v.getter(n)},function(e){var t=parseInt(e);n.maxYear=t,d.maxYear(t)})}}}])}(),e.service("ruiCalendarView",["ruiUtils","ruiDateUtils",function(e,t){var n=this,r=function(e,t,n){return new Date(e,t-1,n)},i=function(t){if(t){if(e.isProto(t,"[object Date]"))return t;if(e.is(t,"string")||e.is(t,"number"))return new Date(t)}return null},a=function(e,t){if(e===t)return!0;var r=n.convertIn(e),i=n.convertIn(t);return!r&&i?!1:!i&&r?!1:r||i?r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate():!0},s=r,o=i;this.convertOut=function(e){return s(e.year,e.month,e.day)},this.setConversionOut=function(e){s=e||r},this.convertIn=function(e){return o(e)},this.setConversionIn=function(e){o=e||i},this.createYearArray=function(e,t){for(var n=[],r=e;t>=r;r++)n.push(r);return n},this.createView=function(r,i){if(!r)throw"ngModel is require to create a CalendarView instance.";return new function(){function c(e){var n=u.getSelectedDate();if(n){var i=t.modifyDate(n,e),a=t.daysInMonth(e.year||i.getFullYear(),e.month||i.getMonth()+1);n.getDate()>a&&(e.day=a,i=t.modifyDate(n,e)),r.$setViewValue(i)}}var s=new Date,o=s.getFullYear(),u=this;if(this._year=s.getFullYear(),this._month=s.getMonth()+1,this._minYear=o-25,this._maxYear=o+25,this._yearArray,this._monthData,this._itemName,this._multiSelect=i&&i.isMultiSelect&&!i.isSyncView,this._sync=i&&i.isSyncView,i){if(i.isSyncView&&i.isMultiSelect)throw"CalendarView cannot be both sync-view and multi-select.";i.year&&(this._year=parseInt(i.year)||this._year),e.isDefined(i.month)&&(this._month=parseInt(i.month)||this._month);var l=parseInt(i.yearRadius);l&&(this._minYear=o-l,this._maxYear=o+l),this._minYear=parseInt(i.minYear)||this._minYear,this._maxYear=parseInt(i.maxYear)||this._maxYear}this._yearArray=n.createYearArray(u._minYear,u._maxYear),this.itemName=function(t){return e.isDefined(t)?void(u._itemName=t):u._itemName},this.setDate=function(e){return e=t.parseDate(e),e&&u.setView(e.getFullYear(),e.getMonth()+1),u},this.setView=function(e,t){return this._year=parseInt(e),this._month=parseInt(t),u._sync&&c({year:date.getFullYear(),month:date.getMonth(),day:date.getDate()}),u.updateData(),u},this.year=function(t){return e.isDefined(t)?(u.isValidYear(t)&&(u._year=parseInt(t),u._sync&&c({year:u._year}),e.triggerUpdate(function(){u.updateData()})),u):u._year},this.month=function(t){return e.isDefined(t)?(u._month=parseInt(t)||u._month,u._sync&&c({month:u._month}),e.triggerUpdate(function(){u.updateData()}),u):u._month},this.isValidYear=function(e){return e=parseInt(e)||0,e>=u._minYear&&e<=u._maxYear},this.minYear=function(t){return e.isDefined(t)?(u._minYear=parseInt(t)||u._minYear,u._yearArray=n.createYearArray(u._minYear,u._maxYear),u):u._minYear},this.maxYear=function(t){return e.isDefined(t)?(u._maxYear=parseInt(t)||u._maxYear,u._yearArray=n.createYearArray(u._minYear,u._maxYear),u):u._maxYear},this.yearRadius=function(t){return e.isDefined(t)?(u.minYear(o-t),u.maxYear(o+t),u._yearArray=n.createYearArray(u._minYear,u._maxYear),u):Math.min(u._minYear,u._maxYear)},this.yearRange=function(){return u._yearArray},this.addYears=function(t){var n=u._year+parseInt(t);u.isValidYear(n)&&(u._year=n,u._sync&&c({year:n}),e.triggerUpdate(function(){u.updateData()}))},this.addMonths=function(t){for(var n=u._year,r=u._month+parseInt(t);0>=r;)if(n--,r=12+r,!u.isValidYear(n))return;var i=new Date(n,r-1,1);u._year=i.getFullYear(),u._month=i.getMonth()+1,u._sync&&c({year:u._year,month:u._month}),e.triggerUpdate(function(){u.updateData()})},this.updateData=function(){for(var f,n=u.year(),r=u.month(),i=new Date(n,r-1,1),a=i.getDay(),s=t.daysInMonth(n,r),l=(Math.ceil(s/7),[]),p=0;s+a>p;p++)if(p%7===0&&(f=[],l.push(f)),a>p)f.push({});else{var d=p-a+1,h=u.getSelectedItems(n,r,d);f.push({year:n,month:r,day:d,selected:h.length>0,values:h})}u._monthData=l,e.triggerUpdate()},this.data=function(){return u._monthData},this.getSelectedItems=function(t,i,a){var s=[];if(!r.$modelValue)return s;for(var c,o=r.$modelValue instanceof Array?r.$modelValue:[r.$modelValue],l=0;l<o.length;l++)if(c=o[l]){c=u._itemName?o[l][u._itemName]:o[l];var f=n.convertIn(c);if(f){if(e.isDefined(t)&&f.getFullYear()!==t)continue;if(e.isDefined(i)&&f.getMonth()!==i-1)continue;if(e.isDefined(a)&&f.getDate()!==a)continue}s.push(c)}return s},this.getSelectedDate=function(){if(u._multiSelect){for(var a,e=[],t=r.$modelValue instanceof Array?r.$modelValue:[r.$modelValue],i=0;i<t.length;i++)if(a=t[i]){a=u._itemName?t[i][u._itemName]:t[i];var s=n.convertIn(a);s&&e.push(s)}return e}return n.convertIn(r.$modelValue)},this.addSelected=function(t,n){if(!u._multiSelect)return void u.setSelected(t);var i=e.spliceAll(r.$modelValue,t,a);if(n&&i.length){if(!(t instanceof Array))return void u.updateData();e.spliceAll(t,i,a)}r.$modelValue instanceof Array||(r.$modelValue?r.$setViewValue([r.$modelValue]):r.$setViewValue([])),e.pushAll(r.$modelValue,t),u.updateData()},this.setSelected=function(t){if(u._multiSelect){var n=[];t instanceof n?e.pushAll(n,t):n.push(t),r.$setViewValue(n)}else t instanceof Array?r.$setViewValue(t[0]):r.$setViewValue(t);u.updateData()},this.removeSelected=function(t){r.$modelValue instanceof Array?e.spliceAll(r.$modelValue,t):(r.$modelValue===t||t instanceof Array&&e.arrayContains(t,r.$modelValue,a))&&r.$setViewValue(null),u.updateData()},this.clearSelected=function(){r.$setViewValue(u._multiSelect?[]:null),u.updateData()},this.showSelected=function(){if(!u._sync){var e=u.getSelectedItems(u._year,u._month);if(!e.length){e=u.getSelectedItems(),e.sort(function(e,t){var r=n.convertIn(e),i=n.convertIn(t);if(!r&&i)return 1;if(!i&&r)return-1;if(!r&&!i)return 0;var a=0;return a-=12*Math.abs(r.getFullYear()-u._year)+Math.abs(r.getMonth()+1-u._month),a+=12*Math.abs(i.getFullYear()-u._year)+Math.abs(i.getMonth()+1-u._month)});var t=e.pop();t&&u.setView(t.getFullYear(),t.getMonth()+1)}}}}}}]),e.service("ruiDateUtils",["ruiUtils",function(e){var t=this;this.parseDate=function(t){if(t){if(e.isProto(t,"[object Date]"))return t;if(e.is(t,"string")||e.is(t,"number"))return new Date(t)}return null},this.daysInMonth=function(t,n){if(e.isDefined(t))return new Date(parseInt(t),parseInt(n),0).getDate();var r=new Date;return new Date(r.getFullYear(),r.getMonth()+1,0).getDate()},this.modifyDate=function(e,t){var n=parseInt(t.year)||e.getFullYear(),r=parseInt(t.month)||e.getMonth()+1,i=parseInt(t.day)||e.getDate(),a=parseInt(t.hours),s=parseInt(t.minutes),o=parseInt(t.seconds),u=parseInt(t.milliseconds);return a=isNaN(a)?e.getHours():a,s=isNaN(s)?e.getMinutes():s,o=isNaN(o)?e.getSeconds():o,u=isNaN(u)?e.getMilliseconds():u,new Date(n,r-1,i,a,s,o,u)},this.addYears=function(e,n){return t.modifyDate(e,{year:e.getFullYear()+n})},this.addMonths=function(e,n){for(var r=e.getFullYear(),i=e.getMonth()+1+parseInt(n);0>=i;)r--,i=12+i;t.modifyDate(e,{year:r,month:i})},this.addDays=function(e,n){for(var r=e.getFullYear(),i=e.getMonth()+1,a=e.getDate()+parseInt(n);0>=a;)for(i--,a=t.daysInMonth(r,i)+a;0>=i;)i=12+i,r--;t.modifyDate(e,{year:r,month:i,day:a})},this.addHours=function(e,n){for(var r=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours()+parseInt(n);0>=s;)for(a--,s=24+s;0>=a;)for(i--,a=t.daysInMonth(r,i)+a;0>=i;)i=12+i,r--;t.modifyDate(e,{year:r,month:i,day:a,hours:s})},this.addMinutes=function(e,n){for(var r=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours(),o=e.getMinutes()+parseInt(n);0>=o;)for(s--,o=60+o;0>=s;)for(a--,s=24+s;0>=a;)for(i--,a=t.getDaysInMonth(r,i)+a;0>=i;)i=12+i,r--;t.modifyDate(e,{year:r,month:i,day:a,hours:s,minutes:o})},this.addSeconds=function(e,n){for(var r=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours(),o=e.getMinutes(),u=e.getSeconds()+n;0>=u;)for(o--,u=60+u;0>=o;)for(s--,o=60+o;0>=s;)for(a--,s=24+s;0>=a;)for(i--,a=t.daysInMonth(r,i)+a;0>=i;)i=12+i,r--;t.modifyDate(e,{year:r,month:i,day:a,hours:s,minutes:o,seconds:u})}}]),e.service("ruiUtils",["$timeout","$parse",function(e,n){var r=this,i={promise:null,callbacks:[],callback:function(){for(i.promise=null,i.callbacks.reverse();i.callbacks.length;)i.callbacks.pop()()}};this.getStyle=function(e,t){return e=e[0]||e,document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle?(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),e.currentStyle[t]):""},this.rect=function(e){return(e[0]||e).getBoundingClientRect()},this.stopEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},this.disable=function(e,n){e=e[0]||e;var i=t(e.querySelectorAll("input,a,select,textarea,button,label"));i.push(e),n?i.attr("disabled","disabled").on("click",r.stopEvent):i.removeAttr("disabled").off("click",r.stopEvent),t(e)[n?"addClass":"removeClass"]("disabled")[0].disabkled=n},this.isClicked=function(e,t){for(var n=t.target;n;){if(n===(e[0]||e))return!0;n=n.parentNode}return!1},this.is=function(e,t){return typeof e===t},this.isProto=function(e,t){return Object.prototype.toString.call(e)===t},this.isDefined=function(e){return!r.is(e,"undefined")},this.hasAttr=function(e,n){return e=t(e[0]||e),r.isDefined(e.attr(n))||r.isDefined(e.attr("data-"+n))},this.pointerX=function(e){return(e.touches?e.touches[0].clientX:e.pageX)||0},this.pointerY=function(e){return(e.touches?e.touches[0].clientY:e.pageY)||0},this.parseBool=function(e){return r.is(e,"string")?(e=e.toLowerCase(),""!==e&&"false"!==e&&"no"!==e&&"off"!==e):e?!0:!1},this.triggerUpdate=function(t){t&&i.callbacks.push(t),i.promise||(i.promise=e(i.callback))},this.orVal=function(e,t,n){return e&&e[t]?e[t]:n},this.orInt=function(e,t,n){if(!e)return n;var r=parseInt(e[t]);return isNaN(r)?n:r},this.orBool=function(e,t){return e&&r.parseBool(e[t])},this.pushAll=function(e,t){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n++)e.push(t[n])},this.spliceAll=function(e,t,n){t=t instanceof Array?t:[t];for(var r=[],i=0;i<e.length;i++)for(var a=0;a<t.length;a++)if(n&&n(e[i],t[a])||e[i]===t[a]){r.push(e.splice(i,1)[0]),i--;break}return r},this.arrayContains=function(e,t,n){t=t instanceof Array?t:[t];for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(n&&n(e[r],t[i])||e[r]===t[i])return!0;return!1},this.numberGetter=function(e,t,i){var a={val:i,getter:null};if(!r.isDefined(t))return a;var s=parseInt(t);return isNaN(s)?(t&&(a.getter=n(t),a.val=a.getter(e)),a):(a.val=s,a)}}])}();